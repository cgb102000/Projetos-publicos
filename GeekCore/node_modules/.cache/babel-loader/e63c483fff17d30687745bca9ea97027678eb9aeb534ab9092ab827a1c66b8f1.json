{"ast":null,"code":"import{useState,useEffect,useContext}from'react';import{useNavigate,Link}from'react-router-dom';import{AuthContext}from'../contexts/AuthContext';import{contentService,authService}from'../services/api';import{Card}from'../components/Card';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";export function Home(){const[recentItems,setRecentItems]=useState([]);const[loading,setLoading]=useState(true);const{isAuthenticated}=useContext(AuthContext);const navigate=useNavigate();useEffect(()=>{loadRecentItems();},[]);async function loadRecentItems(){try{setLoading(true);const items=await contentService.getRecentContent();setRecentItems(items.map(item=>({...item,collection:item.tipo==='anime'?'animes':'filmes'})));}catch(error){console.error('Erro ao carregar itens:',error);}finally{setLoading(false);}}const handleFavorite=async item=>{if(!isAuthenticated){navigate('/login');return;}try{await authService.toggleFavorite(item._id,item.collection);// Adicionar feedback visual aqui\n}catch(error){console.error('Erro ao favoritar:',error);}};if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-center min-h-screen\",children:/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary\"})});}return/*#__PURE__*/_jsxs(\"div\",{className:\"content-section pt-20 animate-fadeIn\",children:[/*#__PURE__*/_jsxs(\"section\",{className:\"mb-16\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"section-title\",children:\"Destaques\"}),/*#__PURE__*/_jsx(\"div\",{className:\"relative h-[70vh] rounded-lg overflow-hidden mb-12\",children:recentItems[0]&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"img\",{src:recentItems[0].img_url,alt:recentItems[0].titulo,className:\"w-full h-full object-cover\"}),/*#__PURE__*/_jsx(\"div\",{className:\"absolute inset-0 bg-gradient-to-t from-darker via-transparent to-transparent\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"absolute bottom-0 left-0 p-8\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-5xl font-bold text-white mb-4\",children:recentItems[0].titulo}),/*#__PURE__*/_jsxs(\"a\",{href:recentItems[0].url,className:\"netflix-button\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Assistir Agora\"}),/*#__PURE__*/_jsx(\"svg\",{className:\"w-6 h-6\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:\"2\",d:\"M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z\"})})]})]})})]})})]}),/*#__PURE__*/_jsxs(\"section\",{className:\"mb-16\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"section-title\",children:\"Conte\\xFAdo Recente\"}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-4\",children:recentItems.map(item=>/*#__PURE__*/_jsx(Card,{item:item,isAuthenticated:isAuthenticated,onFavorite:handleFavorite},item._id))})]})]});}","map":{"version":3,"names":["useState","useEffect","useContext","useNavigate","Link","AuthContext","contentService","authService","Card","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Home","recentItems","setRecentItems","loading","setLoading","isAuthenticated","navigate","loadRecentItems","items","getRecentContent","map","item","collection","tipo","error","console","handleFavorite","toggleFavorite","_id","className","children","src","img_url","alt","titulo","href","url","fill","stroke","viewBox","strokeLinecap","strokeLinejoin","strokeWidth","d","onFavorite"],"sources":["C:/Users/Caio/Documents/GitHub/Projetos-publicos/GeekCore/src/pages/Home.js"],"sourcesContent":["import { useState, useEffect, useContext } from 'react';\r\nimport { useNavigate, Link } from 'react-router-dom';\r\nimport { AuthContext } from '../contexts/AuthContext';\r\nimport { contentService, authService } from '../services/api';\r\nimport { Card } from '../components/Card';\r\n\r\nexport function Home() {\r\n  const [recentItems, setRecentItems] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const { isAuthenticated } = useContext(AuthContext);\r\n  const navigate = useNavigate();\r\n\r\n  useEffect(() => {\r\n    loadRecentItems();\r\n  }, []);\r\n\r\n  async function loadRecentItems() {\r\n    try {\r\n      setLoading(true);\r\n      const items = await contentService.getRecentContent();\r\n      setRecentItems(items.map(item => ({\r\n        ...item,\r\n        collection: item.tipo === 'anime' ? 'animes' : 'filmes'\r\n      })));\r\n    } catch (error) {\r\n      console.error('Erro ao carregar itens:', error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }\r\n\r\n  const handleFavorite = async (item) => {\r\n    if (!isAuthenticated) {\r\n      navigate('/login');\r\n      return;\r\n    }\r\n\r\n    try {\r\n      await authService.toggleFavorite(item._id, item.collection);\r\n      // Adicionar feedback visual aqui\r\n    } catch (error) {\r\n      console.error('Erro ao favoritar:', error);\r\n    }\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"flex items-center justify-center min-h-screen\">\r\n        <div className=\"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary\"></div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"content-section pt-20 animate-fadeIn\">\r\n      {/* Hero Section */}\r\n      <section className=\"mb-16\">\r\n        <h2 className=\"section-title\">Destaques</h2>\r\n        <div className=\"relative h-[70vh] rounded-lg overflow-hidden mb-12\">\r\n          {recentItems[0] && (\r\n            <>\r\n              <img \r\n                src={recentItems[0].img_url} \r\n                alt={recentItems[0].titulo}\r\n                className=\"w-full h-full object-cover\"\r\n              />\r\n              <div className=\"absolute inset-0 bg-gradient-to-t from-darker via-transparent to-transparent\">\r\n                <div className=\"absolute bottom-0 left-0 p-8\">\r\n                  <h1 className=\"text-5xl font-bold text-white mb-4\">{recentItems[0].titulo}</h1>\r\n                  <a href={recentItems[0].url} className=\"netflix-button\">\r\n                    <span>Assistir Agora</span>\r\n                    <svg className=\"w-6 h-6\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z\"/>\r\n                    </svg>\r\n                  </a>\r\n                </div>\r\n              </div>\r\n            </>\r\n          )}\r\n        </div>\r\n      </section>\r\n\r\n      <section className=\"mb-16\">\r\n        <h2 className=\"section-title\">Conte√∫do Recente</h2>\r\n        <div className=\"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-4\">\r\n          {recentItems.map(item => (\r\n            <Card \r\n              key={item._id} \r\n              item={item}\r\n              isAuthenticated={isAuthenticated}\r\n              onFavorite={handleFavorite}\r\n            />\r\n          ))}\r\n        </div>\r\n      </section>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}