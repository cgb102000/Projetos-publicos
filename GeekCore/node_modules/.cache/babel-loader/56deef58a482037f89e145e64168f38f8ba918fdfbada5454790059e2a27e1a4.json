{"ast":null,"code":"import{createContext,useReducer,useEffect}from'react';import{jsx as _jsx}from\"react/jsx-runtime\";const initialState={isAuthenticated:false,user:null,token:null,loading:true};function authReducer(state,action){switch(action.type){case'LOGIN':return{...state,isAuthenticated:true,user:action.payload.user,token:action.payload.token,loading:false};case'LOGOUT':return{...state,isAuthenticated:false,user:null,token:null,loading:false};case'SET_LOADING':return{...state,loading:action.payload};default:return state;}}export const AuthContext=/*#__PURE__*/createContext();export function AuthProvider(_ref){let{children}=_ref;const[state,dispatch]=useReducer(authReducer,initialState);useEffect(()=>{const token=localStorage.getItem('token');if(token){const user=JSON.parse(localStorage.getItem('user'));dispatch({type:'LOGIN',payload:{user,token}});}else{dispatch({type:'SET_LOADING',payload:false});}},[]);return/*#__PURE__*/_jsx(AuthContext.Provider,{value:{...state,dispatch},children:children});}","map":{"version":3,"names":["createContext","useReducer","useEffect","jsx","_jsx","initialState","isAuthenticated","user","token","loading","authReducer","state","action","type","payload","AuthContext","AuthProvider","_ref","children","dispatch","localStorage","getItem","JSON","parse","Provider","value"],"sources":["C:/Users/Caio/Documents/GitHub/Projetos-publicos/GeekCore/src/contexts/AuthContext.js"],"sourcesContent":["import { createContext, useReducer, useEffect } from 'react';\r\n\r\nconst initialState = {\r\n  isAuthenticated: false,\r\n  user: null,\r\n  token: null,\r\n  loading: true\r\n};\r\n\r\nfunction authReducer(state, action) {\r\n  switch (action.type) {\r\n    case 'LOGIN':\r\n      return {\r\n        ...state,\r\n        isAuthenticated: true,\r\n        user: action.payload.user,\r\n        token: action.payload.token,\r\n        loading: false\r\n      };\r\n    case 'LOGOUT':\r\n      return {\r\n        ...state,\r\n        isAuthenticated: false,\r\n        user: null,\r\n        token: null,\r\n        loading: false\r\n      };\r\n    case 'SET_LOADING':\r\n      return {\r\n        ...state,\r\n        loading: action.payload\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n\r\nexport const AuthContext = createContext();\r\n\r\nexport function AuthProvider({ children }) {\r\n  const [state, dispatch] = useReducer(authReducer, initialState);\r\n\r\n  useEffect(() => {\r\n    const token = localStorage.getItem('token');\r\n    if (token) {\r\n      const user = JSON.parse(localStorage.getItem('user'));\r\n      dispatch({ \r\n        type: 'LOGIN', \r\n        payload: { user, token }\r\n      });\r\n    } else {\r\n      dispatch({ type: 'SET_LOADING', payload: false });\r\n    }\r\n  }, []);\r\n\r\n  return (\r\n    <AuthContext.Provider value={{ ...state, dispatch }}>\r\n      {children}\r\n    </AuthContext.Provider>\r\n  );\r\n}\r\n"],"mappings":"AAAA,OAASA,aAAa,CAAEC,UAAU,CAAEC,SAAS,KAAQ,OAAO,CAAC,OAAAC,GAAA,IAAAC,IAAA,yBAE7D,KAAM,CAAAC,YAAY,CAAG,CACnBC,eAAe,CAAE,KAAK,CACtBC,IAAI,CAAE,IAAI,CACVC,KAAK,CAAE,IAAI,CACXC,OAAO,CAAE,IACX,CAAC,CAED,QAAS,CAAAC,WAAWA,CAACC,KAAK,CAAEC,MAAM,CAAE,CAClC,OAAQA,MAAM,CAACC,IAAI,EACjB,IAAK,OAAO,CACV,MAAO,CACL,GAAGF,KAAK,CACRL,eAAe,CAAE,IAAI,CACrBC,IAAI,CAAEK,MAAM,CAACE,OAAO,CAACP,IAAI,CACzBC,KAAK,CAAEI,MAAM,CAACE,OAAO,CAACN,KAAK,CAC3BC,OAAO,CAAE,KACX,CAAC,CACH,IAAK,QAAQ,CACX,MAAO,CACL,GAAGE,KAAK,CACRL,eAAe,CAAE,KAAK,CACtBC,IAAI,CAAE,IAAI,CACVC,KAAK,CAAE,IAAI,CACXC,OAAO,CAAE,KACX,CAAC,CACH,IAAK,aAAa,CAChB,MAAO,CACL,GAAGE,KAAK,CACRF,OAAO,CAAEG,MAAM,CAACE,OAClB,CAAC,CACH,QACE,MAAO,CAAAH,KAAK,CAChB,CACF,CAEA,MAAO,MAAM,CAAAI,WAAW,cAAGf,aAAa,CAAC,CAAC,CAE1C,MAAO,SAAS,CAAAgB,YAAYA,CAAAC,IAAA,CAAe,IAAd,CAAEC,QAAS,CAAC,CAAAD,IAAA,CACvC,KAAM,CAACN,KAAK,CAAEQ,QAAQ,CAAC,CAAGlB,UAAU,CAACS,WAAW,CAAEL,YAAY,CAAC,CAE/DH,SAAS,CAAC,IAAM,CACd,KAAM,CAAAM,KAAK,CAAGY,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,CAC3C,GAAIb,KAAK,CAAE,CACT,KAAM,CAAAD,IAAI,CAAGe,IAAI,CAACC,KAAK,CAACH,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC,CAAC,CACrDF,QAAQ,CAAC,CACPN,IAAI,CAAE,OAAO,CACbC,OAAO,CAAE,CAAEP,IAAI,CAAEC,KAAM,CACzB,CAAC,CAAC,CACJ,CAAC,IAAM,CACLW,QAAQ,CAAC,CAAEN,IAAI,CAAE,aAAa,CAAEC,OAAO,CAAE,KAAM,CAAC,CAAC,CACnD,CACF,CAAC,CAAE,EAAE,CAAC,CAEN,mBACEV,IAAA,CAACW,WAAW,CAACS,QAAQ,EAACC,KAAK,CAAE,CAAE,GAAGd,KAAK,CAAEQ,QAAS,CAAE,CAAAD,QAAA,CACjDA,QAAQ,CACW,CAAC,CAE3B","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}