{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Caio\\\\Documents\\\\GitHub\\\\Projetos-publicos\\\\GeekCore\\\\src\\\\contexts\\\\AuthContext.js\",\n  _s = $RefreshSig$();\nimport { createContext, useReducer, useEffect } from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst initialState = {\n  isAuthenticated: false,\n  user: null,\n  token: null,\n  loading: true\n};\nfunction authReducer(state, action) {\n  switch (action.type) {\n    case 'LOGIN':\n      return {\n        ...state,\n        isAuthenticated: true,\n        user: action.payload.user,\n        token: action.payload.token,\n        loading: false\n      };\n    case 'LOGOUT':\n      return {\n        ...state,\n        isAuthenticated: false,\n        user: null,\n        token: null,\n        loading: false\n      };\n    case 'SET_LOADING':\n      return {\n        ...state,\n        loading: action.payload\n      };\n    case 'UPDATE_USER':\n      const updatedUser = {\n        ...state.user,\n        ...action.payload.user,\n        foto: action.payload.user.foto // Garantir que a foto seja atualizada\n      };\n      localStorage.setItem('user', JSON.stringify(updatedUser));\n      return {\n        ...state,\n        user: updatedUser\n      };\n    default:\n      return state;\n  }\n}\nexport const AuthContext = /*#__PURE__*/createContext();\nexport const AuthProvider = ({\n  children\n}) => {\n  _s();\n  const [state, dispatch] = useReducer(authReducer, initialState);\n  useEffect(() => {\n    const token = localStorage.getItem('token');\n    if (token) {\n      const user = JSON.parse(localStorage.getItem('user'));\n      dispatch({\n        type: 'LOGIN',\n        payload: {\n          user,\n          token\n        }\n      });\n    } else {\n      dispatch({\n        type: 'SET_LOADING',\n        payload: false\n      });\n    }\n  }, []);\n  const updateUserData = userData => {\n    if (userData) {\n      dispatch({\n        type: 'UPDATE_USER',\n        payload: {\n          user: {\n            ...userData,\n            foto: userData.foto // Garantir que a foto seja incluída\n          }\n        }\n      });\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(AuthContext.Provider, {\n    value: {\n      ...state,\n      dispatch,\n      updateUserData,\n      isAuthenticated: !!state.token\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 82,\n    columnNumber: 5\n  }, this);\n};\n_s(AuthProvider, \"bgCdjuTOmPdSBRwTap80EFd9Y3U=\");\n_c = AuthProvider;\nvar _c;\n$RefreshReg$(_c, \"AuthProvider\");","map":{"version":3,"names":["createContext","useReducer","useEffect","jsxDEV","_jsxDEV","initialState","isAuthenticated","user","token","loading","authReducer","state","action","type","payload","updatedUser","foto","localStorage","setItem","JSON","stringify","AuthContext","AuthProvider","children","_s","dispatch","getItem","parse","updateUserData","userData","Provider","value","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/Caio/Documents/GitHub/Projetos-publicos/GeekCore/src/contexts/AuthContext.js"],"sourcesContent":["import { createContext, useReducer, useEffect } from 'react';\r\n\r\nconst initialState = {\r\n  isAuthenticated: false,\r\n  user: null,\r\n  token: null,\r\n  loading: true\r\n};\r\n\r\nfunction authReducer(state, action) {\r\n  switch (action.type) {\r\n    case 'LOGIN':\r\n      return {\r\n        ...state,\r\n        isAuthenticated: true,\r\n        user: action.payload.user,\r\n        token: action.payload.token,\r\n        loading: false\r\n      };\r\n    case 'LOGOUT':\r\n      return {\r\n        ...state,\r\n        isAuthenticated: false,\r\n        user: null,\r\n        token: null,\r\n        loading: false\r\n      };\r\n    case 'SET_LOADING':\r\n      return {\r\n        ...state,\r\n        loading: action.payload\r\n      };\r\n    case 'UPDATE_USER':\r\n      const updatedUser = { \r\n        ...state.user, \r\n        ...action.payload.user,\r\n        foto: action.payload.user.foto // Garantir que a foto seja atualizada\r\n      };\r\n      localStorage.setItem('user', JSON.stringify(updatedUser));\r\n      return {\r\n        ...state,\r\n        user: updatedUser\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n\r\nexport const AuthContext = createContext();\r\n\r\nexport const AuthProvider = ({ children }) => {\r\n  const [state, dispatch] = useReducer(authReducer, initialState);\r\n\r\n  useEffect(() => {\r\n    const token = localStorage.getItem('token');\r\n    if (token) {\r\n      const user = JSON.parse(localStorage.getItem('user'));\r\n      dispatch({ \r\n        type: 'LOGIN', \r\n        payload: { user, token }\r\n      });\r\n    } else {\r\n      dispatch({ type: 'SET_LOADING', payload: false });\r\n    }\r\n  }, []);\r\n\r\n  const updateUserData = (userData) => {\r\n    if (userData) {\r\n      dispatch({ \r\n        type: 'UPDATE_USER',\r\n        payload: { \r\n          user: {\r\n            ...userData,\r\n            foto: userData.foto // Garantir que a foto seja incluída\r\n          }\r\n        }\r\n      });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <AuthContext.Provider value={{ \r\n      ...state, \r\n      dispatch,\r\n      updateUserData,\r\n      isAuthenticated: !!state.token \r\n    }}>\r\n      {children}\r\n    </AuthContext.Provider>\r\n  );\r\n};\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}